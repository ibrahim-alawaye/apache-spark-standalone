# Worker Scale
SPARK_WORKERS=3

# Master URL
SPARK_MASTER=spark://172.20.0.2:7077

SPARK_DRIVER_MEMORY=1g
SPARK_DRIVER_CORES=1
SPARK_EXECUTOR_MEMORY=384m
SPARK_EXECUTOR_CORES=1
SPARK_EXECUTOR_INSTANCES=3
SPARK_WORKER_MEMORY=2g
SPARK_WORKER_CORES=2


# Partition Configuration
SPARK_SQL_SHUFFLE_PARTITIONS=100
SPARK_DEFAULT_PARALLELISM=100
SPARK_SQL_FILES_MAXPARTITIONBYTES=128m
SPARK_SQL_FILES_MINPARTITIONNUM=1
SPARK_SQL_ADAPTIVE_ENABLED=true
SPARK_SQL_ADAPTIVE_COALESCEPARTITIONS_ENABLED=true
SPARK_SQL_ADAPTIVE_ADVISORYPARTITIONSIZEINBYTES=64m

# Dynamic Allocation Settings
SPARK_DYNAMICALLOCATION_ENABLED=true
SPARK_SHUFFLE_SERVICE_ENABLED=true
SPARK_DYNAMICALLOCATION_MINEXECUTORS=1
SPARK_DYNAMICALLOCATION_MAXEXECUTORS=4
SPARK_DYNAMICALLOCATION_INITIALEXECUTORS=1
SPARK_DYNAMICALLOCATION_EXECUTORIDLETIMEOUT=120s

# Memory Management
SPARK_MEMORY_STORAGEFRACTION=0.5
SPARK_MEMORY_FRACTION=0.8

# Shuffle Settings
SPARK_SHUFFLE_REGISTRATION_TIMEOUT=30s
SPARK_SHUFFLE_REGISTRATION_MAXATTEMPTS=5
SPARK_SHUFFLE_PUSH_ENABLED=true
SPARK_SHUFFLE_REGISTRATION_TIMEOUT=60s

# Network Settings
SPARK_UI_PORT=4040
SPARK_LOCAL_DIR=/tmp/spark-temp

# Serialization
SPARK_SERIALIZER=org.apache.spark.serializer.KryoSerializer

# Compression and Optimization
SPARK_RDD_COMPRESS=true
SPARK_BROADCAST_COMPRESS=true

# Logging and History
SPARK_EVENTLOG_ENABLED=true
SPARK_EVENTLOG_DIR=/tmp/spark-events
SPARK_HISTORY_FS_LOGDIRECTORY=/tmp/spark-events

# Broadcast Settings
SPARK_BROADCAST_BLOCKSIZE=4m
SPARK_BROADCAST_CHECKSUM=true

# IO Settings
SPARK_IO_COMPRESSION_CODEC=lz4
SPARK_IO_COMPRESSION_LZ4_BLOCKSIZE=32k

# SQL Settings
SPARK_SQL_AUTOBROADCASTJOINTHRESHOLD=10m
SPARK_SQL_BROADCASTTIMEOUT=300s
SPARK_SQL_SOURCES_PARTITIONOVERWRITEMODE=dynamic

# Scheduler Settings
SPARK_SCHEDULER_MODE=FAIR
SPARK_SCHEDULER_ALLOCATION_FILE=/opt/spark/conf/fairscheduler.xml

# Cache Settings
SPARK_CLEANER_REFERENCETRACKING=true
SPARK_CLEANER_REFERENCETRACKING_BLOCKING=true
SPARK_CLEANER_PERIODICGC_INTERVAL=30min

# Network Settings
SPARK_NETWORK_TIMEOUT=240s
SPARK_RPC_MESSAGE_MAXSIZE=256