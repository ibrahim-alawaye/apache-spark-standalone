# Worker Scale
SPARK_WORKERS=16

# Master URL
SPARK_MASTER=spark://172.20.0.2:7077

# Resource Configuration
SPARK_DRIVER_MEMORY=8g
SPARK_DRIVER_CORES=4
SPARK_EXECUTOR_MEMORY=16g
SPARK_EXECUTOR_CORES=8
SPARK_EXECUTOR_INSTANCES=4
SPARK_WORKER_MEMORY=32g
SPARK_WORKER_CORES=16

# Partition Configuration
SPARK_SQL_SHUFFLE_PARTITIONS=200
SPARK_DEFAULT_PARALLELISM=200
SPARK_SQL_FILES_MAXPARTITIONBYTES=256m
SPARK_SQL_FILES_MINPARTITIONNUM=2
SPARK_SQL_ADAPTIVE_ENABLED=true
SPARK_SQL_ADAPTIVE_COALESCEPARTITIONS_ENABLED=true
SPARK_SQL_ADAPTIVE_ADVISORYPARTITIONSIZEINBYTES=128m

# Dynamic Allocation Settings
SPARK_DYNAMICALLOCATION_ENABLED=true
SPARK_SHUFFLE_SERVICE_ENABLED=true
SPARK_DYNAMICALLOCATION_MINEXECUTORS=2
SPARK_DYNAMICALLOCATION_MAXEXECUTORS=8
SPARK_DYNAMICALLOCATION_INITIALEXECUTORS=2
SPARK_DYNAMICALLOCATION_EXECUTORIDLETIMEOUT=120s

# Memory Management
SPARK_MEMORY_STORAGEFRACTION=0.6
SPARK_MEMORY_FRACTION=0.8

# Shuffle Settings
SPARK_SHUFFLE_REGISTRATION_TIMEOUT=60s
SPARK_SHUFFLE_REGISTRATION_MAXATTEMPTS=5
SPARK_SHUFFLE_PUSH_ENABLED=true

# Network Settings
SPARK_UI_PORT=4040
SPARK_LOCAL_DIR=/tmp/spark-temp

# Serialization
SPARK_SERIALIZER=org.apache.spark.serializer.KryoSerializer

# Compression and Optimization
SPARK_RDD_COMPRESS=true
SPARK_BROADCAST_COMPRESS=true
SPARK_SPECULATION=true
SPARK_SPECULATION_MULTIPLIER=2

# Logging and History
SPARK_EVENTLOG_ENABLED=true
SPARK_EVENTLOG_DIR=/tmp/spark-events
SPARK_HISTORY_FS_LOGDIRECTORY=/tmp/spark-events
SPARK_HISTORY_FS_CLEANER_ENABLED=true
SPARK_HISTORY_FS_CLEANER_MAXAGE=7d

# Broadcast Settings
SPARK_BROADCAST_BLOCKSIZE=8m
SPARK_BROADCAST_CHECKSUM=true

# IO Settings
SPARK_IO_COMPRESSION_CODEC=lz4
SPARK_IO_COMPRESSION_LZ4_BLOCKSIZE=64k

# SQL Settings
SPARK_SQL_AUTOBROADCASTJOINTHRESHOLD=100m
SPARK_SQL_BROADCASTTIMEOUT=600s
SPARK_SQL_SOURCES_PARTITIONOVERWRITEMODE=dynamic
SPARK_SQL_STATISTICS_SIZE_AUTOUPDATE_ENABLED=true

# Scheduler Settings
SPARK_SCHEDULER_MODE=FAIR
SPARK_SCHEDULER_ALLOCATION_FILE=/opt/spark/conf/fairscheduler.xml
SPARK_SCHEDULER_REVIVE_INTERVAL=1s

# Cache Settings
SPARK_CLEANER_REFERENCETRACKING=true
SPARK_CLEANER_REFERENCETRACKING_BLOCKING=true
SPARK_CLEANER_PERIODICGC_INTERVAL=15min

# Network Settings
SPARK_NETWORK_TIMEOUT=240s
SPARK_RPC_MESSAGE_MAXSIZE=512